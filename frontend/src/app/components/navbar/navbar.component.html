<mat-toolbar class="navbar">
  <!-- Logo -->
  <div class="logo-section">
    <img src="assets/logo.png" alt="Vitilo" class="logo-icon" />
    <span class="logo-text">Vitilo Talk</span>
  </div>

  <!-- Search Bar -->
  <div class="search-section">
    <mat-icon class="search-icon">search</mat-icon>
    <input 
      type="text" 
      placeholder="Search Vitilo Talk" 
      class="search-input"
      [(ngModel)]="searchQuery"
      (keyup.enter)="onSearch()"
    />
  </div>

  <span class="spacer"></span>

  <!-- Action Buttons -->
  <div class="actions-section">
    <!-- Create Post Button -->
    <button mat-icon-button class="action-btn" matTooltip="Create Post" (click)="openCreatePost()">
      <mat-icon>add_circle_outline</mat-icon>
    </button>

    <!-- Notifications -->
    <button mat-icon-button class="action-btn" matTooltip="Notifications" [matMenuTriggerFor]="notificationMenu">
      <mat-icon [matBadge]="notificationCount" matBadgeColor="warn" [matBadgeHidden]="notificationCount === 0">
        notifications_none
      </mat-icon>
    </button>

    <!-- User Menu -->
    <button mat-button class="user-menu-btn" [matMenuTriggerFor]="userMenu">
      <div class="user-avatar">
        <img [src]="getJdenticonUrl(currentUser?.avatar_hash)" alt="Avatar" />
      </div>
      <div class="user-info">
        <span class="username">{{ currentUser?.anonymous_username }}</span>
        <mat-icon class="dropdown-icon">arrow_drop_down</mat-icon>
      </div>
    </button>
  </div>
</mat-toolbar>

<!-- Notification Menu -->
<mat-menu #notificationMenu="matMenu" class="notification-menu">
  <div class="menu-header">
    <h3>Notifications</h3>
  </div>
  <mat-divider></mat-divider>
  <div class="notification-list" *ngIf="notifications.length > 0">
    <button mat-menu-item *ngFor="let notification of notifications" class="notification-item">
      <mat-icon>{{ notification.icon }}</mat-icon>
      <div class="notification-content">
        <p>{{ notification.message }}</p>
        <span class="notification-time">{{ notification.time }}</span>
      </div>
    </button>
  </div>
  <div class="empty-state" *ngIf="notifications.length === 0">
    <mat-icon>notifications_none</mat-icon>
    <p>No new notifications</p>
  </div>
</mat-menu>

<!-- User Menu -->
<mat-menu #userMenu="matMenu" class="user-menu">
  <div class="menu-user-info">
    <div class="menu-avatar">
      <img [src]="getJdenticonUrl(currentUser?.avatar_hash)" alt="Avatar" />
    </div>
    <div>
      <p class="menu-username">{{ currentUser?.anonymous_username }}</p>
      <p class="menu-email">{{ currentUser?.email }}</p>
    </div>
  </div>
  <mat-divider></mat-divider>
  
  <button mat-menu-item routerLink="/profile">
    <mat-icon>person</mat-icon>
    <span>My Profile</span>
  </button>
  
  <button mat-menu-item routerLink="/settings">
    <mat-icon>settings</mat-icon>
    <span>Settings</span>
  </button>
  
  <mat-divider></mat-divider>
  
  <button mat-menu-item (click)="logout()">
    <mat-icon>logout</mat-icon>
    <span>Logout</span>
  </button>
</mat-menu>
